# Predictive Analytics Used Phone Price

## Latar Belakang

Dalam era digital dan teknologi yang terus berkembang, handphone (ponsel) telah menjadi salah satu perangkat elektronik yang sangat penting dalam kehidupan sehari-hari. Banyak orang yang tertarik untuk membeli handphone bekas, baik untuk alasan finansial, keinginan untuk mencoba model atau merek baru, atau sebagai alternatif jika handphone mereka rusak atau hilang. Namun, menentukan harga yang tepat untuk handphone bekas bisa menjadi tugas yang rumit. Harga handphone bekas dapat bervariasi secara signifikan tergantung pada faktor-faktor seperti merek, model, kondisi fisik, usia, spesifikasi teknis, dan permintaan pasar. Para pembeli dan penjual handphone bekas seringkali kesulitan dalam menetapkan harga yang adil dan kompetitif.

Dalam hal ini, _Machine Learning_ dan _Predictive Analytics_ dapat memberikan solusi yang berguna. Dengan memanfaatkan teknik _Machine Learning_ dan menganalisis data historis penjualan handphone bekas, data spesifikasi teknis, data kondisi fisik, dan faktor-faktor lainnya, kita dapat mengembangkan model yang dapat memprediksi harga handphone bekas secara akurat. Model ini akan mempertimbangkan berbagai fitur _handphone_ bekas, seperti merek, model, spesifikasi teknis (RAM, penyimpanan, kamera, dll.), usia _handphone_, kondisi fisik (goresan, kerusakan, dll.), serta faktor eksternal seperti tren pasar, harga terkini, dan keadaan ekonomi. "Ini tidak hanya membantu kostumer memutuskan _handphone_ yang tepat untuk dibeli , ini juga membantu pemilik memutuskan harga _handphone_ yang sesuai untuk fitur dan kondisi yang mereka tawarkan. Ide memprediksi harga ini akan membantu masyarakat
membuat pilihan berdasarkan informasi saat mereka membeli ponsel di masa mendatang" (S., Subhiksha & Thota, Swathi, 2020: 4-5).

Dengan menggunakan model prediksi harga handphone bekas, para penjual dapat memperoleh wawasan yang lebih baik tentang harga yang adil untuk menawarkan handphone mereka, sementara para pembeli dapat menggunakan informasi tersebut untuk menilai apakah harga yang diminta oleh penjual wajar atau tidak.

Keuntungan dari karya ilmiah ini adalah:
1. Kemudahan dalam menentukan harga: Dengan model prediksi harga handphone bekas, para penjual dapat dengan lebih mudah menentukan harga yang adil dan kompetitif berdasarkan faktor-faktor yang signifikan.
2. Efisiensi dalam pembelian: Para pembeli dapat menggunakan model untuk memperkirakan harga yang diharapkan untuk suatu handphone bekas sebelum melakukan pembelian. Hal ini membantu mereka dalam membuat keputusan yang lebih baik dan memperoleh nilai terbaik dari pembelian mereka.
3. Transparansi pasar: Dengan model prediksi harga yang akurat, transparansi pasar _handphone_ bekas dapat ditingkatkan, membantu penjual dan pembeli dalam melakukan negosiasi yang lebih adil dan efisien.

Disamping itu tentu karya ilmiah ini juga mempunyai kelemahan seperti:
1. Ketergantungan pada kualitas dan kuantitas data: Proyek _machine learning_ membutuhkan data yang berkualitas dan kuantitas yang mencukupi. Salah satu kelemahan yang mungkin muncul adalah jika dataset yang digunakan tidak lengkap, tidak akurat, atau tidak representatif, maka kualitas dan akurasi prediksi harga handphone bekas dapat terpengaruh. Selain itu, jika data yang tersedia terbatas, model prediksi mungkin memiliki keterbatasan dalam generalisasi pada situasi yang tidak ada dalam dataset.
2. Tantangan dalam mengikuti perubahan tren dan pasar: Harga _handphone_ bekas dapat dipengaruhi oleh perubahan tren, permintaan pasar, dan faktor-faktor eksternal lainnya. Memprediksi perubahan ini dengan akurat dapat menjadi sulit karena perubahan tren dan pasar dapat bersifat dinamis dan kompleks. Jika model tidak diperbarui secara teratur atau tidak dapat menangkap perubahan ini, prediksi harga _handphone_ bekas mungkin tidak akurat atau tidak memadai.

Dalam pengembangan karya ilmiah ini, langkah-langkah yang perlu diambil meliputi pengumpulan data penjualan _handphone_ bekas, persiapan dan pembersihan data, pemilihan dan pelatihan model _Machine Learning_, serta evaluasi dan pengujian model untuk memastikan keakuratan prediksi harga. Dengan demikian, karya ilmiah ini dapat memberikan nilai tambah bagi penjual dan pembeli _handphone_ bekas, membantu mereka dalam mengoptimalkan pengalaman jual beli dan menemukan harga yang adil dalam pasar yang dinamis.

## Business Understanding

Dalam industri jual beli handphone bekas, ada kebutuhan yang signifikan untuk menentukan harga yang tepat untuk _handphone_ bekas. Para penjual ingin menawarkan harga yang adil dan kompetitif, sementara para pembeli ingin memperoleh _handphone_ bekas dengan harga yang wajar. Namun, menentukan harga yang tepat bisa menjadi tantangan karena faktor-faktor yang beragam dan kompleks yang mempengaruhi harga handphone bekas. Dalam hal ini, karya ilmiah prediksi harga handphone bekas menggunakan _Machine Learning_ akan memberikan solusi yang berguna untuk para penjual dan pembeli. Dengan memanfaatkan teknologi Machine Learning, karya ilmiah ini bertujuan untuk mengembangkan model yang dapat memprediksi harga _handphone_ bekas berdasarkan berbagai faktor seperti merek, model, spesifikasi teknis, usia, kondisi fisik, dan faktor-faktor lainnya.

Pemahaman bisnis ini akan membantu penjual handphone bekas dalam menentukan harga yang adil berdasarkan karakteristik dan kondisi handphone yang mereka jual. Dengan menggunakan model prediksi, mereka dapat mengoptimalkan penawaran mereka dan meningkatkan kesempatan untuk menjual handphone bekas dengan harga yang menguntungkan. Di sisi pembeli, pemahaman bisnis ini akan memberikan wawasan yang lebih baik dalam mengevaluasi harga _handphone_ bekas yang mereka minati. Dengan memiliki perkiraan harga yang diharapkan, mereka dapat membuat keputusan yang lebih baik dan memastikan bahwa mereka tidak membayar terlalu mahal atau kurang dari nilai sebenarnya.

Selain itu, dengan adanya model prediksi harga handphone bekas, akan tercipta transparansi pasar yang lebih baik. Penjual dan pembeli akan memiliki panduan yang lebih jelas dalam menentukan harga yang adil, dan hal ini dapat mengurangi negosiasi yang tidak produktif serta meningkatkan efisiensi dalam transaksi jual beli _handphone_ bekas. Dalam rangka pengembangan karya ilmiah ini, penting untuk bekerja sama dengan para penjual _handphone_ bekas, pedagang, dan _platform_ jual beli handphone untuk memahami kebutuhan dan perspektif mereka. Dengan memahami dinamika pasar handphone bekas dan tantangan yang dihadapi oleh para pemangku kepentingan, kita dapat mengarahkan karya ilmiah ini untuk memberikan solusi yang paling relevan dan bermanfaat.

Dengan demikian, karya ilmiah prediksi harga handphone bekas menggunakan _Machine Learning_ memiliki potensi untuk meningkatkan efisiensi dan transparansi dalam pasar handphone bekas, memberikan manfaat bagi penjual, pembeli, dan pemangku kepentingan terkait lainnya.

### Problem Statement and Goals

Berdasarkan kondisi yang telah diuraikan sebelumnya, kami akan mengembangkan sebuah sistem prediksi harga _handphone_ bekas untuk menjawab permasalahan berikut:
1. Bagaimana dapat memberikan panduan harga yang akurat untuk penjual dan pembeli _handphone_ bekas?
2. Bagaimana dapat memberikan informasi yang transparan tentang faktor-faktor yang memengaruhi harga _handphone_ bekas kepada penjual dan pembeli?

Serta untuk menjawab pertanyaan tersebut, Anda akan membuat _predictive_ modelling dengan tujuan atau goals sebagai berikut:
1. Membantu penjual menentukan harga yang adil: Tujuan utama karya ilmiah ini adalah memberikan panduan kepada penjual _handphone_ bekas dalam menetapkan harga yang adil dan kompetitif berdasarkan karakteristik dan kondisi handphone yang mereka jual. Dengan demikian, para penjual dapat meningkatkan peluang mereka untuk menjual handphone bekas dengan harga yang menguntungkan.

2. Memungkinkan pembeli untuk mengevaluasi harga yang wajar: karya ilmiah ini bertujuan memberikan wawasan yang lebih baik kepada pembeli _handphone_ bekas dalam mengevaluasi harga yang wajar untuk _handphone_ yang mereka minati. Dengan memiliki perkiraan harga yang diharapkan, pembeli dapat membuat keputusan yang lebih baik dan memastikan bahwa mereka tidak membayar terlalu mahal atau kurang dari nilai sebenarnya.

### Solution Statement

Dalam rangka meraih tujuan tersebut, solusi yang diajukan adalah membangun model _Machine Learning_ yang dapat memprediksi harga handphone bekas berdasarkan berbagai faktor seperti merek, model, spesifikasi teknis, usia, kondisi fisik, dan faktor-faktor lainnya. Model ini akan menggunakan teknik _Machine Learning_ untuk menganalisis data historis penjualan handphone bekas dan faktor-faktor yang mempengaruhi harga.

Data yang diperoleh akan meliputi informasi tentang penjualan handphone bekas, kondisi fisik, spesifikasi teknis, merek, dan model. Model akan dilatih dengan menggunakan algoritma _Machine Learning_ _KNN_, _Boosting_, _LinearRegression_ dan _Support Vector Regression_ dengan membandingkan hasil dari keempat algoritma tersebut untuk mendapatkan hasil prediksi yang terbaik. Setelah dilatih, model akan dapat memprediksi harga yang diharapkan untuk handphone bekas berdasarkan input faktor-faktor yang diberikan.

Alasan menggunakan algoritma tersebut karena ke empat algoritma tersebut merupakan yang paling cocok untuk penyelesaian masalah dengan cara regresi.

Algoritma KNN (_K-Nearest Neighbors_):
1. KNN adalah algoritma yang sederhana dan mudah dipahami. Karena karya ilmiah ini melibatkan prediksi harga berdasarkan fitur-fitur yang relevan, KNN dapat digunakan untuk mencari tetangga terdekat berdasarkan atribut-atribut yang serupa. Hal ini memungkinkan KNN untuk memprediksi harga handphone bekas berdasarkan harga handphone bekas yang memiliki atribut serupa.

2. KNN memiliki kemampuan untuk menangani data dengan variasi yang tinggi. Dalam kasus ini, handphone bekas memiliki berbagai atribut seperti merek, model, spesifikasi teknis, usia, dan kondisi fisik yang sangat bervariasi. KNN mampu mengatasi variasi ini dengan mengambil kategori tetangga terdekat yang memiliki atribut yang serupa.

Algoritma _Boosting_:
1. _Boosting_ adalah algoritma yang mampu meningkatkan performa model dengan menggabungkan beberapa model yang lemah menjadi model yang lebih kuat. Dalam kasus prediksi harga _handphone_ bekas, faktor-faktor yang mempengaruhi harga dapat sangat kompleks dan saling terkait. Dengan menggunakan algoritma Boosting, kita dapat menghasilkan model yang lebih akurat dan dapat menangani hubungan yang kompleks antara fitur-fitur yang ada.

2. _Boosting_ memiliki kemampuan untuk mengatasi _overfitting_. Dalam karya ilmiah ini, kita ingin menghasilkan model yang dapat menggeneralisasi dengan baik pada data baru. Dengan menggunakan teknik _Boosting_, kita dapat menghindari _overfitting_ dan menghasilkan model yang dapat memberikan prediksi yang lebih konsisten dan akurat pada data baru.

Algoritma _Linear Regression_:
1. _Linear Regression_ adalah algoritma yang sesuai untuk memodelkan hubungan linier antara variabel dependen dan variabel independen. Dalam karya ilmiah ini, kita ingin memprediksi harga handphone bekas berdasarkan beberapa fitur seperti spesifikasi teknis, usia, dan kondisi fisik. _Linear Regression_ dapat membantu dalam memodelkan hubungan linier antara fitur-fitur tersebut dengan harga handphone bekas.

2. _Linear Regression_ dapat memberikan interpretasi yang mudah. Dalam kasus prediksi harga _handphone_ bekas, interpretasi dari koefisien regresi dapat memberikan wawasan tentang sejauh mana setiap fitur berkontribusi terhadap harga _handphone_ bekas. Ini dapat membantu penjual dan pembeli dalam memahami faktor-faktor yang mempengaruhi harga dan membuat keputusan yang lebih baik.

Algoritma SVR (Support Vector Regression):
1. SVR adalah metode regresi yang memanfaatkan konsep-konsep dari Support Vector Machines (SVM). Dalam karya ilmiah ini, SVR dapat digunakan untuk memodelkan hubungan kompleks antara fitur-fitur yang ada dengan harga handphone bekas.

2. SVR memiliki kemampuan untuk menangani data yang tidak linear. Dalam banyak kasus, hubungan antara fitur-fitur dan harga handphone bekas mungkin tidak linier. Dengan menggunakan kernel yang sesuai, SVR dapat memetakan data ke ruang fitur yang lebih tinggi dan menemukan hubungan non-linear yang ada antara fitur-fitur dan harga.

## Data Understanding

Datasets yang gunakan merupakan data kumpulan harga handphone bekas yang bersumber dari Kaggle, yang berisi fitur sebagai berikut:

- **device_brand:** Nama merek pabrikan
- **os:** OS tempat perangkat berjalan
- **screen_size:** Ukuran layar dalam cm
- **4g:** Apakah 4G tersedia atau tidak
- **5g:** Apakah 5G tersedia atau tidak
- **front_camera_mp:** Resolusi kamera belakang dalam megapiksel
- **back_camera_mp:** Resolusi kamera depan dalam megapiksel
- **internal_memory:** Jumlah memori internal (ROM) dalam GB
- **ram:** Jumlah RAM dalam GB
- **baterai:** Kapasitas energi baterai perangkat dalam mAh
- **berat:** Berat perangkat dalam gram
- **release_year:** Tahun model perangkat dirilis
- **days_used:** Jumlah hari perangkat bekas/refurbished telah digunakan
- **normalized_new_price:** Harga normal perangkat baru dengan model yang sama
- **normalized_used_price (TARGET):** Harga normal untuk peralatan bekas/rekondisi

### Membaca Data

Pertama muat data csv menggunakan pandas, masukan dimana lokasi file csv berada. Terdapat jumlah data pada table sebanyak 15 kolom dan 3454 baris.

    usedPhones = pd.read_csv('datasets/used_device_data.csv')
    usedPhones

Tabel 1. Data table detail harga ponsel bekas

|index|device\_brand|os|screen\_size|4g|5g|rear\_camera\_mp|front\_camera\_mp|internal\_memory|battery|weight|release\_year|days\_used|normalized\_used\_price|normalized\_new\_price|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|0|Honor|Android|14\.5|1|0|13\.0|5\.0|64\.0|3020\.0|146\.0|2020|127|4\.307572449|4\.715100245|
|1|Honor|Android|17\.3|1|1|13\.0|16\.0|128\.0|4300\.0|193\.0|2020|325|5\.0540267688|5\.519017936|
|2|Honor|Android|16\.69|1|1|13\.0|8\.0|128\.0|4200\.0|193\.0|2020|162|5\.0540267688|5\.884630724|
|3|Honor|Android|17\.78|1|1|13\.0|8\.0|64\.0|4500\.0|193\.0|2020|345|5\.0540267688|5\.630960854|
|4|Honor|Android|15\.32|1|0|13\.0|8\.0|64\.0|4500\.0|185\.0|2020|293|4\.389994804|4\.947837479|
|5|Honor|Android|16\.23|1|0|13\.0|8\.0|64\.0|4000\.0|176\.0|2020|223|4\.413888608|5\.060694494|
|6|Honor|Android|13\.84|1|0|8\.0|5\.0|32\.0|3020\.0|144\.0|2020|234|3\.878259375|4\.518958489|
|7|Honor|Android|15\.77|1|0|13\.0|8\.0|64\.0|3400\.0|164\.0|2020|219|4\.729421148|5\.18872569|
|8|Honor|Android|15\.32|1|0|13\.0|16\.0|128\.0|4000\.0|165\.0|2020|161|4\.886054204|5\.299916088|
|9|Honor|Android|16\.23|1|0|13\.0|8\.0|128\.0|4000\.0|176\.0|2020|327|4\.773223771|5\.073610093|
|10|Honor|Android|15\.47|1|0|13\.0|8\.0|64\.0|3020\.0|150\.0|2020|268|4\.26703657|4\.713665782|

Dataset mempunyai total 4 fitur kategori dengan tipe data _object_ dan 11 fitur numerik yang mempunyai tipe data _float_ dan _integer_. Kemudian jika kita melihat dekripsi data, dapat terlihat terdapat informasi seperti rata-rata, standar deviasi, dan lainnya.

    usedPhones.info()
    
    usedPhones.describe()

### Data Cleansing

Setelah melihat data, selanjutnya lakukan pembersihan data, kita bisa melakukan pengecekan untuk melihat data mana yang berisi value NaN (kosong), kemudian kita bisa atur baik dengan menghapusnya atau dengan mengisi nilai kosong tersebut agar data menjadi terisi semua.

    usedPhones.isnull().sum()

Karena data ini kemungkinan besar mempunyai outliers, data kosong akan diisi dengan nilai median, dengan cara melakukan looping pada setiap fitur yang mengandung nilai NaN

    for i in features:
        a=usedPhones[i].median()
        print(i,'new value : ', a)
        usedPhones[i]= usedPhones[i].fillna(a)
        
Kemudian nilai NaN dalam fitur, menghapusnya bukanlah opsi yang tepat, karena datasets kita tidak terlalu banyak, sehingga lebih baik dengan cara menggganti nilai dengan nilai median dimana nilai median tidak akan terpengaruh oleh outlier

Selanjutnya gunakan IQR pada untuk mengeliminasi outliers,
- Quantile 0.10: Quantile 0.10 (atau persentil ke-10) digunakan untuk menentukan batas bawah (lower) dari nilai-nilai data. Dalam konteks ini, nilai-nilai data yang kurang dari quantile 0.10 akan digantikan dengan nilai quantile 0.10. Ini berarti bahwa data dengan nilai terendah 10% akan dibatasi agar tidak lebih rendah dari nilai ini. Penggunaan quantile 0.10 dapat membantu menghilangkan ekstrem nilai rendah yang mungkin tidak representatif atau mengganggu analisis.
- Quantile 0.90: Quantile 0.90 (atau persentil ke-90) digunakan untuk menentukan batas atas (upper) dari nilai-nilai data. Dalam konteks ini, nilai-nilai data yang lebih dari quantile 0.90 akan digantikan dengan nilai quantile 0.90. Ini berarti bahwa data dengan nilai tertinggi 10% akan dibatasi agar tidak melebihi nilai ini. Penggunaan quantile 0.90 dapat membantu menghilangkan ekstrem nilai tinggi yang mungkin tidak representatif atau mengganggu analisis.

Dengan membatasi nilai-nilai data pada rentang quantile 0.10 hingga 0.90, kita dapat menghindari potensi pengaruh ekstrem dan membantu dalam analisis yang lebih stabil. Selain itu, dengan mencetak skewness value (nilai skewness) setelah pemrosesan, kita dapat melihat bagaimana pembatasan nilai pada fitur-fitur tersebut telah mempengaruhi kecondongan atau kemiringan distribusi data.

    features=['screen_size','front_camera_mp','ram','battery','weight','normalized_used_price','normalized_new_price']
    for i in features:
        lower = usedPhones[i].quantile(0.10)
        upper = usedPhones[i].quantile(0.90)
        usedPhones[i] = np.where(usedPhones[i] <lower, lower,usedPhones[i])
        usedPhones[i] = np.where(usedPhones[i] >upper, upper,usedPhones[i])

    usedPhones.shape
    
Perlakukan fitur internal_memory, battery dan rear_camera_mp dengan perhitungan yang berbeda, karena mereka memiliki outliers dan skewness yang berbeda:
- Quantile 0.95 pada fitur "rear_camera_mp":
Pada bagian ini, digunakan quantile 0.95 untuk menentukan nilai batas atas (upper) dari fitur "rear_camera_mp". Jika nilai pada fitur "rear_camera_mp" lebih besar dari quantile 0.95, maka nilai tersebut akan digantikan dengan nilai quantile 0.95. Dengan melakukan ini, data yang memiliki nilai yang sangat tinggi (outlier) pada fitur "rear_camera_mp" akan dibatasi agar tidak melebihi nilai quantile 0.95.
- Quantile 0.9 pada fitur "internal_memory":
Pada bagian ini, digunakan quantile 0.9 untuk menentukan nilai batas atas (upper) dari fitur "internal_memory". Jika nilai pada fitur "internal_memory" lebih besar dari quantile 0.9, maka nilai tersebut akan digantikan dengan nilai quantile 0.9. Tujuan dari langkah ini adalah untuk membatasi data yang memiliki nilai yang sangat tinggi (outlier) pada fitur "internal_memory", sehingga data yang ekstrim tidak memiliki pengaruh yang berlebihan pada analisis.
- Quantile 0.8 pada fitur "weight":
Pada bagian ini, digunakan quantile 0.8 untuk menentukan nilai batas atas (upper) dari fitur "weight". Jika nilai pada fitur "weight" lebih besar dari quantile 0.8, maka nilai tersebut akan digantikan dengan nilai quantile 0.8. Dengan melakukan ini, data yang memiliki nilai yang sangat tinggi (outlier) pada fitur "weight" akan dibatasi agar tidak melebihi nilai quantile 0.8.
    
### Analisis Univariate

Hitung persentase data device_brand dan visualisasikan diagram batang

    numerical_features = ['normalized_used_price', 'normalized_new_price', 'screen_size', 'rear_camera_mp', 'front_camera_mp', 'internal_memory', 'battery', 'weight', 'release_year', 'days_used']
    categorical_features = ['device_brand', 'os', '4g', '5g', 'ram']

    feature = categorical_features[0]
    count = usedPhones[feature].value_counts()
    percent = 100*usedPhones[feature].value_counts(normalize=True)
    df = pd.DataFrame({'Total sample':count, 'percentage':percent.round(1)})
    print(df)
    count.plot(kind='bar', title=feature);

Visualisasikan diagram batang semua fitur numerik sehingga kita bisa analisis dan bandingkan

    usedPhones.hist(bins=40, figsize=(18,12))
    plt.show()

![all text](https://github.com/renhardjh/Predictive-Analytics-Used-Phone-Price/blob/main/Images/Visuallize%20bar%20chart%20numerical_features.png?raw=true)

Berikut kesimpulan informasi dari data yang bisa didapat

- Rentang mp kamera depan sebagian besar antara 0-10 mega piksel
- Memori internal sebagian besar antara 0-100
- Penyimpanan ram ponsel sebagian besar antara 3-5 GB
- Masa pakai baterai sebagian besar sekitar 3000 mah
- Berat sekitar 150-210
- Samsung adalah ponsel yang paling banyak digunakan kembali di samping merek ponsel yang dikategorikan sebagai Lainnya.
- Rata-rata orang yang menggunakan OS Android
- Ukuran layar kebanyakan antara 10-15
- Pengguna 4g dan 5g lebih banyak
- Orang-orang telah menggunakan telepon rata-rata antara 600-800 hari yang kira-kira 2-2,5 tahun
- Rata-rata harga bekas yang dinormalisasi antara 4,2-5rb
- Rata-rata harga baru normal antara 5-6rb
- Kisaran mp kamera belakang sebagian besar antara 5-15 mega piksel
- Sebagian besar ponsel dirilis antara 2013-2015

### Analisis Multivariate

Kita bisa melakukan visualisasi sekaligus untuk membandingkan rata-rata **normalized_us_price** dengan setiap fitur untuk mengerti relasi hubungan setiap data, baik itu menggunakan **catplot**, **pairplot**, dan juga matriks korelasi dengan heatmap.

Berikut visualisasi matriks korelasinya

    correlation_matrix = usedPhones.corr().round(2)

    sns.heatmap(data=correlation_matrix, annot=True, cmap='coolwarm', linewidths=0.5, )
    plt.title("Correlation matrix for numerical features ", size=20)

![alt text](https://github.com/renhardjh/Predictive-Analytics-Used-Phone-Price/blob/main/Images/matrix_correlation_value.png?raw=true)

Dari matriks korelasi tersebut kita dapat simpulkan 5 fitur teratas yang mempunyai relasi tertinggi, sebagai berikut:

- normalized_new_price: 0.79
- battery: 0.69
- front_camera_mp: 0.68
- screen_size: 0.64
- weight: 0.61

Dapat dilihat juga ram tidak memiliki garis karena memiliki nilai dominan atau terbanyak yaitu 4, lebih baik di drop dari datasets

    usedPhones.drop(['ram'], axis=1, inplace=True)
    usedPhones
    
## Data Preparation

Mengubah data kategory yes/no pada fitur 4g dan 5g dengan 1 dan 0 agar model lebih mudah diolah

    dict_cat_symbol = {'yes':1,'no':0}
    usedPhones['4g'] = usedPhones['4g'].map(dict_cat_symbol)
    usedPhones['5g'] = usedPhones['5g'].map(dict_cat_symbol)

Melakukan one hot encoding pada setiap fitur categorical

    from sklearn.preprocessing import  OneHotEncoder

    usedPhones = pd.concat([usedPhones, pd.get_dummies(usedPhones['device_brand'], prefix='device_brand')],axis=1)
    usedPhones = pd.concat([usedPhones, pd.get_dummies(usedPhones['os'], prefix='os')],axis=1)
    usedPhones.drop(['device_brand','os'], axis=1, inplace=True)
    usedPhones.head()
    
Melakukan pengurangan dimensi dengan PCA untuk mengurangi jumlah fitur sambil mempertahankan informasi dalam data. PCA merupakan teknik untuk mereduksi dimensi, mengekstraksi fitur, dan mentransformasi data dari “n-dimensional space” ke dalam sistem berkoordinat baru dengan dimensi m, di mana m lebih kecil dari n.

    from sklearn.decomposition import PCA

    pca = PCA(n_components=len(dimension_features), random_state=12345)
    pca.fit(usedPhones[dimension_features])
    princ_comp = pca.transform(usedPhones[dimension_features])

Menggabungkan fitur dengan korelasi tertinggi kedalam fitur baru dimensi

    from sklearn.decomposition import PCA
    pca = PCA(n_components=1, random_state=12345)
    pca.fit(usedPhones[dimension_features])
    usedPhones['dimension'] = pca.transform(usedPhones.loc[:, (dimension_features)]).flatten()
    usedPhones.drop(dimension_features, axis=1, inplace=True)

### Memisahkan Data training dan test

Pisahkan data latih dan uji, karena data tidak terlalu banyak maka bagi dengan proporsi 95:5

    from sklearn.model_selection import train_test_split

    X = usedPhones.drop(["normalized_used_price"],axis =1)
    y = usedPhones["normalized_used_price"]
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.05, random_state = 12345)
    
Setelah dibagi dataset akan terpecah menjadi:
- Total sampel keseluruhan dataset: 3454
- Total sampel dataset latih: 3281
- Total sample dataset tes: 173

### Scaling and Normalisasi

Pada umumnya disarankan untuk menskalakan dan menormalkan data sebelum melakukan pemodelan untuk memastikan bahwa semua fitur memiliki bobot yang sama dan distribusi yang serupa. Hal ini dapat mencegah fitur yang mendominasi model tertentu, yang dapat menyebabkan overfitting atau hasil yang salah.

    from sklearn.preprocessing import MinMaxScaler

    numerical_features = ['weight','release_year','internal_memory','days_used','dimension']
    scaler = MinMaxScaler()
    scaler.fit(X_train[numerical_features])
    X_train[numerical_features] = scaler.transform(X_train.loc[:, numerical_features])
    X_train[numerical_features].head()

## Pengembangan Model

Seperti yang sudah dijelaskan sebelumnya bahwa dalam kasus prediksi harga handphone bekas ini akan menggunakan algoritma KNN, Boosting, LinearRegression dan SVR, karena dinilai lebih cocok dalam kasus kasus prediksi harga, Kemudian kita akan mengukurnya dengan mean squared error untuk membandingkan model dengan algoritma mana yang terbaik

- K-Nearest Neighbors (KNN): Algoritma KNN menghitung jarak antara titik data yang baru dengan titik data yang ada dalam dataset. Kemudian, menggunakan kelas (harga) dari k titik data terdekat untuk memprediksi kelas (harga) dari titik data yang baru.
    Parameter:
    - n_neighbors: Jumlah tetangga terdekat yang akan digunakan untuk membuat prediksi.
    - metric: Metrik jarak yang digunakan untuk mengukur jarak antara titik data (misalnya, Euclidean, Manhattan, dll.).
    
- Boosting (misalnya, Gradient Boosting atau AdaBoost): Algoritma Boosting membangun serangkaian model prediksi yang lemah secara berurutan. Setiap model baru dibangun untuk memperbaiki kesalahan prediksi model sebelumnya. Prediksi akhir didapatkan dengan menggabungkan prediksi dari semua model.
    
    Parameter (untuk Gradient Boosting):
    - n_estimators: Jumlah model prediksi (pohon) yang akan dibangun.
    - learning_rate: Tingkat pembelajaran yang mengontrol kontribusi setiap model terhadap prediksi akhir.
    
- Linear Regression: Algoritma Linear Regression mencoba untuk menemukan hubungan linier antara variabel input (fitur) dan variabel target (harga). Itu mencari garis regresi terbaik yang meminimalkan kesalahan antara prediksi dan nilai sebenarnya.
    
    Parameter:
    - fit_intercept: Menentukan apakah akan ada pergeseran (intercept) dalam model regresi.
    - normalize: Menentukan apakah fitur-fitur akan dinormalisasi sebelum regresi dilakukan.
    
- Support Vector Regression (SVR): SVR adalah varian dari Support Vector Machines (SVM) yang digunakan untuk regresi. Tujuannya adalah menemukan fungsi pemetaan yang optimal untuk mencapai margin terbaik dengan mengurangi kesalahan prediksi.

    Parameter:
    - kernel: Fungsi kernel yang digunakan dalam pemetaan (misalnya, linear, polynomial, rbf).
    - C: Parameter penalti yang mengendalikan trade-off antara kesalahan prediksi dan kompleksitas model.
    - epsilon: Rentang toleransi yang mengendalikan batas kesalahan yang dapat diterima.

Menyiapkan dataframe untuk analisis model
                                                   
    models = pd.DataFrame(index=['train_mse', 'test_mse'], 
                          columns=['KNN', 'Boosting', 'LinearRegression', 'SVR'])
                          
Model dengan algoritma K-Nearest Neighbor

    from sklearn.neighbors import KNeighborsRegressor
    from sklearn.metrics import mean_squared_error

    knn = KNeighborsRegressor(n_neighbors=10)
    knn.fit(X_train, y_train)

    models.loc['train_mse','knn'] = mean_squared_error(y_pred = knn.predict(X_train), y_true=y_train)

Model dengan algoritma AdaBoostingRegressor

    from sklearn.ensemble import AdaBoostRegressor

    boosting = AdaBoostRegressor(learning_rate=0.05, random_state=55)                             
    boosting.fit(X_train, y_train)
    models.loc['train_mse','Boosting'] = mean_squared_error(y_pred=boosting.predict(X_train), y_true=y_train)

Model dengan algoritma LinearRegression

    from sklearn.linear_model import LinearRegression

    LG = LinearRegression()                             
    LG.fit(X_train, y_train)
    models.loc['train_mse','LinearRegression'] = mean_squared_error(y_pred=LG.predict(X_train), y_true=y_train)

Model dengan algoritma Support Vector Regression

    from sklearn.svm import SVR

    SVR = SVR()                             
    SVR.fit(X_train, y_train)
    models.loc['train_mse','SVR'] = mean_squared_error(y_pred=SVR.predict(X_train), y_true=y_train)

## Evaluasi Model

Evaluasi model dengan membandingkan mean squared error setiap model kemudian coba lakukan prediksi dan bandingkan hasilnya

    mse = pd.DataFrame(columns=['train', 'test'], index=['KNN','Boosting','LinearRegression','SVR'])
 
    # Create a dictionary for each algorithm used
    model_dict = {'KNN': knn, 'Boosting': boosting, 'LinearRegression': LG, 'SVR': SVR}

    # Calculate the Mean Squared Error of each algorithm on the train and test data
    for name, model in model_dict.items():
        mse.loc[name, 'train'] = mean_squared_error(y_true=y_train, y_pred=model.predict(X_train))
        mse.loc[name, 'test'] = mean_squared_error(y_true=y_test, y_pred=model.predict(X_test))

    # Call mse
    mse
    
Tabel 2. Data table hasil evaluasi dan error MSE model menggunakan algoritma KNN, LinearRegression, Boosting dan SVR

|index|train|test|
|---|---|---|
|KNN|0\.05810997410681817|0\.06510443937695261|
|Boosting|0\.06941925655211766|0\.07266846006792949|
|LinearRegression|0\.07162002137770561|0\.06350795701437606|
|SVR|0\.054928794142694845|0\.057348523829999005|

Dari hasil tersebut SVR mempunyai nilai mse terkecil sebesar 0.0549 pada data train dan 0.05734 pada data test, sehingga SVR merupakan algoritma yang paling tepat untuk kasus memprediksi harga ponsel bekas ini, model SVR inilah yang akan digunakan.

subplot hasil mse setiap model untuk membandingkannya

    fig, ax = plt.subplots()
    mse.sort_values(by='test', ascending=False).plot(kind='barh', ax=ax, zorder=3)
    ax.grid(zorder=0)

![alt text](https://github.com/renhardjh/Predictive-Analytics-Used-Phone-Price/blob/main/Images/mse_result.png?raw=true)

### Predict menggunakan Model

    prediction = X_test.iloc[:3].copy()
    pred_dict = {'used_price':y_test[:3]}
    for name, model in model_dict.items():
        pred_dict['prediction_'+name] = model.predict(prediction).round(6)

    pd.DataFrame(pred_dict)

Tabel 3. Data table hasil prediksi model menggunakan algoritma KNN, LinearRegression, Boosting dan SVR

|index|used\_price|prediction\_KNN|prediction\_Boosting|prediction\_LinearRegression|prediction\_SVR|
|---|---|---|---|---|---|
|1405|3\.829293358|3\.836164|4\.00855|3\.938171|3\.635009|
|2734|5\.0540267688|4\.614673|4\.653579|4\.620422|4\.759636|
|386|4\.210645018|4\.172643|4\.386363|4\.323364|4\.288576|

Membandingkan hasil prediksi dari setiap algoritma, hasilnya terlihat tidak terlalu berbeda secara signifikan dari setiap model tersebut, namun sesuai dengan evaluasi menggunakan MSE, SVR menghasilkan error paling terkecil.

Setelah berhasil membuat model yang mempunyai akurasi yang cukup, model ini selanjutnya bisa dipakai untuk aplikasi appraisal yang menghubungkan penjual dan pembeli handphone bekas, dengan masukan seperti spesifikasi, kondisi perangkat, lama pemakaian, tahun pembelian, merk, penjual dan pembeli bisa dengan yakin melakukan transaksi pembelian atau penjualan _handphone_ bekas.

## Kesimpulan

Dalam karya ilmiah prediksi harga handphone bekas menggunakan Machine Learning, kami menggunakan penggunaan algoritma KNN, Boosting, Linear Regression, dan SVR sebagai solusi untuk menangani permasalahan tersebut, karena algoritma tersebut yang pada umumnya digunakan untuk penyelesaian regresi. Dari keempat algoritma tersebut SVR merupakan yang menghasilkan error MSE terkecil yang berarti model dengan algoritma ini menjadi pilihan yang terbaik. 

Dalam pengembangan karya ilmiah ini, dapat dipertimbangkan juga penggunaan kombinasi dari algoritma-algoritma tersebut untuk memperoleh hasil prediksi yang optimal. Misalnya, penggunaan KNN untuk menemukan tetangga terdekat berdasarkan atribut serupa, kemudian menggunakan Boosting untuk meningkatkan performa model dengan menggabungkan beberapa model KNN. Selain itu, Linear Regression dan SVR juga dapat digunakan untuk memodelkan hubungan linier dan non-linear yang ada antara fitur-fitur dan harga. 

Dengan menggunakan pendekatan ini, karya ilmiah prediksi harga handphone bekas dapat memberikan solusi yang akurat dan berguna bagi penjual dan pembeli handphone bekas. Penjual dapat menentukan harga yang adil dan kompetitif, sementara pembeli dapat mengevaluasi harga yang wajar sebelum melakukan pembelian.

## DAFTAR PUSTAKA

- S., Subhiksha & Thota, Swathi. (2020). Prediction of Phone Prices Using Machine Learning Techniques. 10.1007/978-981-15-1097-7_65.

## Sumber Eksternal

- Dataset: [Kaggle: Used Phones & Tablets Pricing Dataset](https://www.kaggle.com/datasets/ahsan81/used-handheld-device-data)
